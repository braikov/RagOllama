{
  "Ollama": {
    "BaseUrl": "http://192.168.0.233:11434/",
    "EmbeddingModel": "qwen3-embedding:8b",
    "ChatModel": "granite3.2:8b"
  },
  "Retrieval": {
    "TopK": 5,
    "Threshold": 0.4
  },
  "Chunking": {
    "Mode": "Word",
    "Word": {
      "ChunkWordCount": 800,
      "OverlapWordCount": 120
    },
    "Adaptive": {
      "TargetWords": 700,
      "MaxWords": 1100,
      "MinWords": 200,
      "OverlapRatio": 0.15,
      "OverlapSentences": 2,
      "MaxHeaderPrefixChars": 300,
      "MaxChunkTextCharsForEmbedding": 0,
      "IncludeHeaderPathPrefix": true,
      "HeaderPrefixFormat": "Section: {path}\n\n",
      "TrimWhitespace": true,
      "NormalizeWhitespace": true
    },
    "AiSemantic": {
      "Model": "qwen2.5:14b-instruct",
      "TimeoutMs": 60000,
      "MaxParagraphsPerRequest": 80,
      "MaxParagraphChars": 1200,
      "TargetWords": 700,
      "MinWords": 200,
      "MaxWords": 1100,
      "OverlapSentences": 2,
      "IncludeHeaderPrefix": true,
      "HeaderPrefixFormat": "Section: {path}\n\n",
      "FallbackToRuleBasedOnError": true,
      "Prompt": {
        "System": "You are a text segmentation engine. You never rewrite text. You only group paragraphs into ordered chunks. Return ONLY valid JSON.",
        "UserTemplate": [
          "Group the paragraphs into coherent chunks for RAG retrieval.",
          "",
          "CONSTRAINTS:",
          "- Keep original paragraph order.",
          "- Use each paragraph exactly once.",
          "- Do not rewrite paragraph text.",
          "- Prefer splitting on topic changes and headings.",
          "- If a paragraph looks like a heading, keep it with the following content.",
          "- Target chunk size: {{targetWords}} words, min {{minWords}}, max {{maxWords}} (approximate).",
          "",
          "RETURN JSON ONLY in this schema:",
          "{ \"chunks\": [ { \"paragraphs\": [0,1,2], \"title\": \"optional\" } ] }",
          "",
          "PARAGRAPHS:",
          "{{paragraphs}}"
        ]
      }
    }
  }
}
